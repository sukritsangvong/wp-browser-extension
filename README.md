# wp-browser-extension

## Dev

### Set Up

1. Make sure node 16.18.0 is installed - you can do this using nvm (node version manger)
2. `cd wikichange`
3. `npm install`
4. `npm run start` (dev build) or `npm run build` (production build)
5. Visit [chrome://extensions/](chrome://extensions/) and toggle developper mode ON
6. For dev build click on `Load unpacked` and select the wikichange/dist folder

NOTE: The dist folder is autogenerated code based off of what is in the src folder.

### How to do highlighting

Highlighting needs to be given raw content (text, including bolding and links). See the example from the Carleton page.

```javascript
const persistent = [
    "ranked #1 in Undergraduate Teaching by U.S. News & World Report for over a decade",
    "Founded in 1866",
    "Admissions is highly selective",
    "Carleton is one of the highest sources of undergraduate students pursuing doctorates",
];
var arrayLength = persistent.length;
for (var i = 0; i < arrayLength; i++) {
    highlightPersistentContent(persistent[i], "#99FF84");
}
```

### How to get page count

Use enums.js as inputs for some of the parameters if needed.

```javascript
import { WIKI_CREATION_DATE, AggregateType } from "./enums.js";
import { getPageViews } from "./timeseriesService.js";

// Get page views for the Pasta article since its creation until the beginning of 2022 by day
const pastaResponse = await getPageViews("Pasta", WIKI_CREATION_DATE, new Date("2022-01-01"), AggregateType.DAILY);
/*
    Returns:
    {
        {"7/1/2015" => 2406},
        {"7/2/2015" => 2076},
        {"7/3/2015" => 1890},
        ...
    }
 */
```

### How to get revision count

```javascript
import { AggregateType } from "./enums.js";
import { getPageRevisionCount } from "./timeseriesService.js";

// Get monthly revision count for the Pasta article from Jan 2022
const pastaRevisionResponse = await getPageRevisionCount(
    "Pasta",
    new Date("2022-01-01"),
    new Date("2022-01-31"),
    AggregateType.DAILY
);
console.log(pastaRevisionResponse);
/*
    Returns:
    {
        {"1/15/2022" => 1},
        {"1/8/2022" => 1}
    }
*/
```

## [Website](https://sukritsangvong.github.io/wp-browser-extension/)
